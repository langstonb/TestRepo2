
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../VersionControl/">
      
      
        <link rel="next" href="../AutomationBuildServer/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.2">
    
    
      
        <title>Section 1 - DevOps Package</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.50c56a3b.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#testing" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="DevOps Package" class="md-header__button md-logo" aria-label="DevOps Package" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            DevOps Package
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Section 1
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="DevOps Package" class="md-nav__button md-logo" aria-label="DevOps Package" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    DevOps Package
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Project Management
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Project Management
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ProjectManagement/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ProjectManagement_0_ProjectPlanning/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Project Planning
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ProjectManagement_1_Jira/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Jira
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ProjectManagement_2_Confluence/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Confluence
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ProjectManagement_3_Bitbucket/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GitHub & Bitbucket
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ProjectManagement_4_OpenSourceLicensing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Open-Source Licensing
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Version Control
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Version Control
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../VersionControl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Section 1
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Testing
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Testing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Section 1
  </span>
  

      </a>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Automation and Build Server
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Automation and Build Server
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../AutomationBuildServer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    First section
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="testing">Testing</h1>
<p>DevOps Package</p>
<h1 id="mission-statement">Mission Statement</h1>
<p>DevOps Package</p>
<p>To significantly  __reduce the barriers to entry __ of DevOps strategies into the day-to-day workflow of Automation Studio project development\, in order to  __increase the efficiency\, quality\, and maintainability __ of the resulting applications</p>
<h1 id="contents">Contents</h1>
<p>Testing</p>
<ul>
<li>What is it?</li>
<li>Why is it important?</li>
<li>Included Template Files</li>
<li>How to Implement:</li>
<li>A Test Plan</li>
<li>Test Driven Development</li>
<li>B&amp;R Unit Testing</li>
<li>Integration Testing</li>
<li>Manual Testing</li>
</ul>
<p><img alt="" src="../img/Testing0.png" /></p>
<h1 id="before-we-get-started">Before we get started</h1>
<p>Setting the stage</p>
<p>Testing can either be  <strong>automated</strong>  or  <strong>manual</strong></p>
<p>In DevOps\, the goal is that you have as much automated testing as possible. Therefore\, the primary focus of this PPT automated testing</p>
<p>Nonetheless\, some manual testing will inevitably be necessary. Therefore\, manual testing strategies are provided at the end</p>
<p><img alt="" src="../img/Testing1.jpg" /></p>
<h1 id="what-is-it">What is it?</h1>
<p>Automated Testing</p>
<h1 id="automated-testing">Automated Testing</h1>
<p>Definition</p>
<p><img alt="" src="../img/Testing2.png" /></p>
<p>Automated testing begins with a defined test plan\, comprised of required features and previously discovered bugs.  The test plan is the contract of what the software is expected to deliver.</p>
<p>A consistent set of inputs is used for each test. This allows multiple programmers to execute the tests in the exact same way.</p>
<p>The tests are run automatically - not by hand (manually) by each engineer</p>
<p>If a bug is discovered\, a new test is written to catch the bug so that once it is fixed\, you will always be checking to confirm it does not return in the future</p>
<p><img alt="" src="../img/Testing3.png" /></p>
<p><img alt="" src="../img/Testing4.png" /></p>
<p><img alt="" src="../img/Testing5.png" /></p>
<h1 id="types-of-tests">Types of Tests</h1>
<p><img alt="" src="../img/Testing6.png" /></p>
<p>Requires manual testing</p>
<p>Will be added in a future revision of the DevOps package</p>
<p>Our primary focus</p>
<h1 id="why-is-it-important">Why is it important?</h1>
<p>Automated Testing</p>
<h1 id="benefits">Benefits</h1>
<p>Automated Testing</p>
<p>Running automated tests is MUCH faster than manual testing</p>
<p>Bugs that are found later in development are more difficult and take longer to fix</p>
<p><img alt="" src="../img/Testing7.png" /></p>
<p>Saving engineering time saves you money</p>
<p>End up with fewer bugs in production code (studies have shown between 40%-90% less bugs<a href="https://www.microsoft.com/en-us/research/wp-content/uploads/2009/10/Realizing-Quality-Improvement-Through-Test-Driven-Development-Results-and-Experiences-of-Four-Industrial-Teams-nagappan_tdd.pdf">1</a>!)</p>
<p>New tests are written for each new bug that is found. This ensures that future features/bugfixes don’t break existing functionality</p>
<p>Existing tests are repeatably executed with every release</p>
<p>Encourages the design of more modular / testable code</p>
<p><img alt="" src="../img/Testing8.png" /></p>
<p><img alt="" src="../img/Testing9.png" /></p>
<p>Increase the testability\, readability\, and adaptability of the code.</p>
<p><em>Testability</em> : create thorough and reproducible tests</p>
<p><em>Readability</em> : tests become a record of bugs and features. Makes it easier for other engineers to understand the code</p>
<p><em>Adaptability</em> : promotes the creation of modular code</p>
<p><img alt="" src="../img/Testing10.png" /></p>
<h1 id="arguments-against-automated-testing">Arguments Against Automated Testing</h1>
<p>And How to Address Them</p>
<p><img alt="" src="../img/Testing11.png" /></p>
<p>Creating unit tests is too time consuming</p>
<p>The result is higher quality software and less bugs in the field. The time you spend writing automated tests would end up being spent (and then some!) during manual testing anyway</p>
<p><img alt="" src="../img/Testing12.png" /></p>
<p>If you don’t know enough about the requirements to write a test\, then you don’t have enough information to write quality code. We must avoid the tendency to start coding before a proper plan is in place</p>
<p>You can’t write the test until you know the design</p>
<ul>
<li>It can be difficult at first\, but like most things it gets easier the more you do it</li>
<li>It is definitely difficult if you wait to add unit tests at the end (don’t do that!)</li>
<li>This could also be an indication that your design is not easily testable (too much functionality in a single function / function block / task\, etc)</li>
<li>Not everything is able to be unit tested. But in those cases\, you will rely on manual testing</li>
</ul>
<p><img alt="" src="../img/Testing13.png" /></p>
<p>Unit testing is hard!</p>
<p><img alt="" src="../img/Testing14.png" /></p>
<p>I don’t know how!</p>
<p>Hence why this DevOps package exists!</p>
<h1 id="included-template-files">Included Template Files</h1>
<p>DevOps Package</p>
<p>Testing</p>
<p>The following template files are included in the DevOps package:</p>
<p>A <a href="slide68.xml">template Excel file </a>for keeping track of your tests</p>
<p>A unit test getting started guide</p>
<p>Examples of good and bad unit tests</p>
<p><img alt="" src="../img/Testing15.png" /></p>
<h1 id="how-to-implement">How to Implement</h1>
<ul>
<li>A Test Plan</li>
<li>Test Driven Development</li>
<li>B&amp;R Unit Testing</li>
<li>Integration Testing</li>
<li>Manual Testing</li>
</ul>
<h1 id="test-plan">Test Plan</h1>
<p><img alt="" src="../img/Testing16.png" /></p>
<h1 id="how-to-build-a-test-plan">How to Build a Test Plan</h1>
<p>Testing at B&amp;R</p>
<ul>
<li>The testing process begins with a solid and complete test plan that is closely linked to the project spec</li>
<li>The test plan must be thoughtfully written before testing and development begin</li>
<li>The requirements + project specification + test plan all go together. These should be completed before you write any code.</li>
<li>In this section\, we will identify recommendations for building such a test plan. The overall  steps are as follows:</li>
</ul>
<p>Test Execution and Reporting</p>
<p>Analyze the Application</p>
<p>Design the Test Strategy</p>
<p>Define the Test Modules and Test Cases</p>
<p>Analyze the Application</p>
<p>Design the Test Strategy</p>
<p>Define the Test Modules and Test Cases</p>
<p>Test Execution and Reporting</p>
<h1 id="analyze-the-application">Analyze the Application</h1>
<p>How to Build a Test Plan</p>
<ul>
<li>The first step in building a test plan is to fully understand the application under test</li>
<li><strong>Therefore\, the __  __specification</strong>  __ must be written before you can create your test plan__</li>
<li>For new projects\, the base functionality must be defined</li>
<li>For new features in an existing project\, the details for that feature must be defined</li>
<li>Remember: If the project has not been defined yet\, then you cannot write reliable or quality code (not to mention\, quality tests!)</li>
</ul>
<p>Analyze the Application</p>
<p>Design the Test Strategy</p>
<p>Define the Test Modules and Test Cases</p>
<p>Test Execution and Reporting</p>
<h1 id="design-the-test-strategy">Design the Test Strategy</h1>
<p>How to Build a Test Plan</p>
<p>There are several things that must be defined in the overall test strategy:</p>
<p>Testing Scope</p>
<p>Testing Type</p>
<p>Resource Planning</p>
<p>Testing Schedule</p>
<p>Analyze the Application</p>
<p>Design the Test Strategy</p>
<p>Define the Test Modules and Test Cases</p>
<p>Test Execution and Reporting</p>
<p>How to Build a Test Plan</p>
<p>There are several things that must be defined in the overall test strategy:</p>
<p><strong>Testing Scope</strong></p>
<p>Testing Type</p>
<p>Resource Planning</p>
<p>Testing Schedule</p>
<p><em>Testing Scope</em></p>
<p>Based on the project specification\, define what will and will not be tested</p>
<p>Analyze the Application</p>
<p>Design the Test Strategy</p>
<p>Define the Test Modules and Test Cases</p>
<p>Test Execution and Reporting</p>
<p>How to Build a Test Plan</p>
<p>There are several things that must be defined in the overall test strategy:</p>
<p>Testing Scope</p>
<p><strong>Testing Type</strong></p>
<p>Resource Planning</p>
<p>Testing Schedule</p>
<p><em>Testing Type</em></p>
<p>This DevOps package provides direct recommendations on unit testing and manual testing</p>
<p>Integration testing will be addressed in a future revision</p>
<p>Analyze the Application</p>
<p>Design the Test Strategy</p>
<p>Define the Test Modules and Test Cases</p>
<p>Test Execution and Reporting</p>
<p>How to Build a Test Plan</p>
<p><em>Resource Planning</em></p>
<p>Define at least one  __personnel resource __ for the following 4 testing roles. Note that one single person can hold multiple roles:</p>
<p>There are several things that must be defined in the overall test strategy:</p>
<p>Testing Scope</p>
<p>Testing Type</p>
<p><strong>Resource Planning</strong></p>
<p>Testing Schedule</p>
<table>
<thead>
<tr>
<th style="text-align: center;">Role</th>
<th style="text-align: center;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">Test manager</td>
<td style="text-align: center;">Defines the tests</td>
</tr>
<tr>
<td style="text-align: center;">Test developer</td>
<td style="text-align: center;">Writes the automated tests</td>
</tr>
<tr>
<td style="text-align: center;">Manual tester</td>
<td style="text-align: center;">Executes the manual tests. Does not analyze the results of any subjective tests (if applicable)<br />Note: This should not be the programmer. Ideally should be an experience user of the machine under test</td>
</tr>
<tr>
<td style="text-align: center;">Manual test approver</td>
<td style="text-align: center;">Analyzes the outcome of the subjective manual tests (if applicable)</td>
</tr>
</tbody>
</table>
<p>Analyze the Application</p>
<p>Design the Test Strategy</p>
<p>Define the Test Modules and Test Cases</p>
<p>Test Execution and Reporting</p>
<p>How to Build a Test Plan</p>
<p><em>Resource Planning</em></p>
<p>Define  <strong>test environments</strong> :</p>
<p>There are several things that must be defined in the overall test strategy:</p>
<p>Testing Scope</p>
<p>Testing Type</p>
<p><strong>Resource Planning</strong></p>
<p>Testing Schedule</p>
<table>
<thead>
<tr>
<th style="text-align: center;">Test Env’t</th>
<th style="text-align: center;">Description / Action Items</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">Automated test environment</td>
<td style="text-align: center;">Refer to the Build Server section of this DevOps package</td>
</tr>
<tr>
<td style="text-align: center;">On-machine testing</td>
<td style="text-align: center;">Identify the point of contact for scheduling machine time<br />Identify any materials and prerequisites needed for on-machine testing  <br />Estimate the time expected to complete the manual tests<br />Identify the testing location (OEM or end user)<br />Remember: manual testing is a distinct step from commissioning!</td>
</tr>
</tbody>
</table>
<p>Analyze the Application</p>
<p>Design the Test Strategy</p>
<p>Define the Test Modules and Test Cases</p>
<p>Test Execution and Reporting</p>
<p>How to Build a Test Plan</p>
<p>There are several things that must be defined in the overall test strategy:</p>
<p>Testing Scope</p>
<p>Testing Type</p>
<p>Resource Planning</p>
<p><strong>Testing Schedule</strong></p>
<ul>
<li><em>Testing Schedule</em></li>
<li>Identify how often you will run the automated tests</li>
<li>Refer to the Build Server section of this DevOps package</li>
<li>Identify when and how often you will run the manual tests\, first in simulation and then on machine</li>
<li>Plan a time to review all test results and define the next steps</li>
<li>i.e. <a href="slide27.xml">Test execution and reporting</a></li>
</ul>
<p>Analyze the Application</p>
<p>Design the Test Strategy</p>
<p>Define the Test Modules and Test Cases</p>
<p>Test Execution and Reporting</p>
<h1 id="define-the-test-module-and-test-cases">Define the Test Module and Test Cases</h1>
<p>How to Build a Test Plan</p>
<ul>
<li>Definitions:</li>
<li>A test module describes an overall functionality on the machine. This is used for organizing all of the test cases.</li>
<li>A test case is a specific\, granular test condition. Several test cases are used to fully test a test module.</li>
<li>Examples:</li>
<li>Test Module: Alarm System<ul>
<li>Test Case 1: Confirm that the alarm history successfully exports</li>
<li>Test Case 2: Confirm that the AlarmList widget on the HMI properly displays the alarms</li>
<li>…</li>
</ul>
</li>
<li>Test Module: Recipe System<ul>
<li>Test Case 1: Confirm you are warned / prompted if the default recipe is missing</li>
<li>Test Case 2: Confirm that you can edit the active recipe and the changes are applied immediately</li>
<li>…</li>
</ul>
</li>
<li>Directives:</li>
<li>All test modules and corresponding test cases must be defined. This should be done within the testing template excel sheet that is provided in this DevOps package</li>
<li>Identify whether each test case will be implemented with unit testing or manual testing</li>
<li>Identify who has ownership of each test case (refer to <a href="slide20.xml">Resource Planning</a>)</li>
</ul>
<p>Analyze the Application</p>
<p>Design the Test Strategy</p>
<p>Define the Test Modules and Test Cases</p>
<p>Test Execution and Reporting</p>
<p>How to Build a Test Plan</p>
<p>Below is a list of generic tests that should be applied to every machine (slide 1 of 2). This list will continue to be expanded to over time.</p>
<p>HMI</p>
<p>All inputs should have proper limits (&gt;max and &lt;min are not permitted)</p>
<p>Language changes accordingly as well as all the text fits in the given spaces in all languages</p>
<p>Unit conversion functions</p>
<p>Confirm that inputs are locked out for users that don't have access. Part of the manual tests.</p>
<p>Confirm the alarm list is visible / working properly\, and that alarms are acknowledgeable</p>
<p>If HMI gets disconnected from the PLC (in hardware topologies where this is possible)\, test that recovery is possible\, but also that commands don't happen unintendedly after disconnect (i.e. if you are manually jogging\, disconnect\, don't keep jogging indefinitely) (i.e. if you are in automatic mode\, HMI disconnects\, is it ok to continue?)</p>
<p>Manually test for system responsiveness\, if it is "good enough“</p>
<p>Basic Motion</p>
<p>E-stop\, confirm it works</p>
<p>Homing\, confirm it works and it's repeatable</p>
<p>Software limits (confirm the axis stops after reaching the limit)</p>
<p>Hardware limits (confirm the axis stops after reaching the limit and before the hard stop)</p>
<p>Jog\, confirm it works</p>
<p>Error conditions and recovery - examples: lag error\, loss of comm from the PLC to the drive\, etc. Will depend on the app\, but think about these error conditions and confirm that you can successfully recover.</p>
<p>Analyze the Application</p>
<p>Design the Test Strategy</p>
<p>Define the Test Modules and Test Cases</p>
<p>Test Execution and Reporting</p>
<p>How to Build a Test Plan</p>
<p>Below is a list of generic tests that should be applied to every machine (slide 2 of 2). This list will continue to be expanded to over time.</p>
<p>IO</p>
<p>Check that the ModuleOKs are monitored and that the response is as intended (just an alarm\, stop the machine\, service mode\, etc)</p>
<p>For any IO points that have a status feedback\, make sure you're monitoring them and doing something with that information. The test here is regarding what you actually do with that status information. Confirm that the next step works.</p>
<p>Fieldbuses- if disconnected\, check you can recover\, and that the machine responds in the way that you need it to.</p>
<p>Data management</p>
<p>Wear level monitoring info that came in AR4.9\, make sure you are using that information and that the response is as intended.</p>
<p>If your file device storage medium gets full\, check that upon trying to save new data you are appropriately warned and that you don't lose any data</p>
<p>Analyze the Application</p>
<p>Design the Test Strategy</p>
<p>Define the Test Modules and Test Cases</p>
<p>Test Execution and Reporting</p>
<h1 id="test-execution-and-reporting">Test Execution and Reporting</h1>
<p>How to Build a Test Plan</p>
<ul>
<li>Automated Tests</li>
<li>The automation server executes the tests in ARsim and provides a report on the automated tests</li>
<li>
<p>Refer to the Automation Server section of this DevOps package</p>
</li>
<li>
<p>Manual Tests</p>
</li>
<li>Manual tests are manually executed and reported</li>
<li>Manual testing should be done only after the Automated Tests are in a good state (mostly or fully all passing)</li>
<li>To help keep track of the status of the manual tests\, there is a template Excel file provided in this package</li>
<li>Details for how to use the file are included on the first tab (“Overview”)</li>
<li>Be sure to identify the software version you are testing in the sheet\, so that it is clear exactly what version you have tested</li>
</ul>
<p><img alt="" src="../img/Testing17.png" /></p>
<p><img alt="" src="../img/Testing18.png" /></p>
<p>Analyze the Application</p>
<p>Design the Test Strategy</p>
<p>Define the Test Modules and Test Cases</p>
<p>Test Execution and Reporting</p>
<p>How to Build a Test Plan</p>
<ul>
<li>At this step you must also define the overall test criteria for what constitutes pass/fail</li>
<li>At what point do you consider a feature or the machine as a whole “done”?</li>
<li>It is indeed possible that a machine can ship with certain defects (failed tests). It is up to the project manager discretion whether a specific test is a show-stopper or not</li>
<li>Ask yourself: Is the cost of delaying shipment worth the defect?</li>
<li>Execute all tests at least once. For each failed test\, identify if the test case is a showstopper or not.</li>
<li>This saves you from having to make this decision for every single test. In practice you only need to decide for tests that fail at any point.</li>
<li>Alternatively\, you can define a priority for each failed test. Then pick a cutoff point where the machine can ship despite defects</li>
</ul>
<p><img alt="" src="../img/Testing19.png" /></p>
<h1 id="test-driven-development">Test Driven Development</h1>
<p>Overview</p>
<p>We will not only be focusing simply on automated unit tests themselves\, but also on the  __Test Driven Development (TDD) __ workflow\, which provides guidelines for when/how to write your tests</p>
<p>Test First</p>
<ul>
<li>Write the test</li>
<li>In TDD\, the test is written BEFORE the feature itself</li>
<li>Run the test</li>
<li>The test must fail because the feature has not been implemented yet</li>
<li>If the test succeeds\, re-work the test until it fails</li>
<li>Write the code for the feature</li>
<li>Afterwards\, run the test. If the feature was implemented correctly\, the test should pass</li>
<li>If the test fails\, re-work the feature until the test passes</li>
</ul>
<p>Refactor</p>
<p><img alt="" src="../img/Testing20.png" /></p>
<ul>
<li>Run all tests\, check if they succeed</li>
<li>If all tests succeed\, consider refactoring</li>
<li>Now that you have identified what needs to be done in order to pass each test\, you may realize a better way to accomplish a feature. Refactor accordingly.</li>
<li>If some tests fail\, correct the features and/or the tests themselves</li>
<li>Once this whole process is complete\, return to the “Test First” development phase by writing the tests for the next features to be implemented (step 1 on the previous slide)</li>
</ul>
<h1 id="what-to-test">What to Test</h1>
<p>Automated Testing</p>
<ul>
<li>Test the common / baseline functionality</li>
<li>This will tell you when the code breaks after you made a change (new feature / bugfix)</li>
<li>Test the edge cases of unusually complex code that you think could have potential errors</li>
<li>This is code that is likely to break when changes are made</li>
<li>Whenever you find a bug\, write a new test case to cover it  __before __ fixing it</li>
<li>This ensures that you have correctly identified how to reproduce the bug and that your fix is correct</li>
<li>It also ensures that you will catch it if the bug returns due to a code change in the future</li>
<li>Add edge case tests to less critical code whenever you have extra time</li>
<li>Increases code quality when time permits</li>
</ul>
<p><img alt="" src="../img/Testing21.png" /></p>
<h1 id="whatwhen-not-to-test">What/When NOT to Test</h1>
<p>Automated Testing</p>
<ul>
<li><span style="color:#FF0000"> <strong>Do</strong> </span>   <span style="color:#FF0000"> <strong>not</strong> </span>  write tests for trivial code</li>
<li><span style="color:#FF0000"> <strong>Do</strong> </span>   <span style="color:#FF0000"> <strong>not</strong> </span>  write trivial tests that don’t add benefit to your process</li>
<li><span style="color:#FF0000"> <strong>Do</strong> </span>   <span style="color:#FF0000"> <strong>not</strong> </span>  use unit testing to test system level functions</li>
<li>Better covered by integration tests or manual testing\, as opposed to unit testing</li>
<li>Integration test recommendations coming soon</li>
<li><span style="color:#FF0000"> <strong>Do</strong> </span>   <span style="color:#FF0000"> <strong>not</strong> </span>  write tests while the application requirements are still rapidly changing</li>
<li>Remember\, the requirements must be clearly defined up front in order to write meaningful tests and quality code</li>
<li><span style="color:#FF0000"> <strong>Do</strong> </span>   <span style="color:#FF0000"> <strong>not</strong> </span>  wait until the end of the application development to write all your tests</li>
<li>It is quite easy to end up with a lot of code that is difficult to test because it is not written in a modular way</li>
</ul>
<p><img alt="" src="../img/Testing22.png" /></p>
<p><img alt="" src="../img/Testing23.png" /></p>
<h1 id="backfilling-unit-tests">Backfilling Unit Tests</h1>
<p>Into Existing Projects</p>
<ul>
<li>Although Test Driven Development is indeed the best way to work\, there will be some instances where you will be forced to backfill unit tests rather than integrate them as you go</li>
<li>Most commonly\, this will occur if you are working on an established / existing project that does not yet have any unit tests implemented</li>
<li><strong>Without a doubt\, it is valuable to backfill unit tests!</strong></li>
<li>However\, there are some additional considerations / tips to keep in mind for this situation (see next slide)</li>
<li>The unit tests that you should definitely and immediately implement (even if no other tests exist yet) are tests for new bugs that you encounter and fix</li>
</ul>
<p><img alt="" src="../img/Testing24.png" /></p>
<p>Some Tips</p>
<ul>
<li>Understand the existing code. Define or find the spec for this code\, because those are the “rules” that you will be testing for.</li>
<li>Review your existing manual test plan and identify the tests that you can automate</li>
<li>Wait until the end of development for features that are already in progress<ul>
<li>If you are refactoring existing code or the application is in flux\, do not write the unit tests yet</li>
<li>Since the tests were not the very first thing you did (aka TDD)\, they should be the very last thing you do</li>
<li>Brand new features should be implemented with TDD</li>
</ul>
</li>
<li>You may want/need to refactor existing code to make it more testable</li>
<li>Do not test trivial things<ul>
<li>This is especially a risk when you are backfilling</li>
<li>Focus on things that are in the project specification. If you are writing tests for things that are not in the spec\, this is a hint that they might be trivial / unhelpful / meaningless</li>
<li>Test things that you actually expect might break in the future</li>
</ul>
</li>
<li>Make sure you are adding value<ul>
<li>Don’t backfill just for the sake of backfilling. Make the tests count.</li>
<li>Put in enough effort so that you trust the results of the test even though they were an afterthought.</li>
<li>If no value is added\, you will not convince others (or yourself) to write unit tests for projects in the future</li>
</ul>
</li>
</ul>
<h1 id="br-unit-testing">B&amp;R Unit Testing</h1>
<h1 id="introductory-resources">Introductory Resources</h1>
<p>B&amp;R Unit Testing</p>
<p>For a step-by-step guide on how to set up and use B&amp;R Unit Testing\, refer to the guide from AutomationCON 2021. This has been included as a template file.</p>
<p><img alt="" src="../img/Testing25.png" /></p>
<h1 id="dedicated-unit-test-configuration">Dedicated Unit Test Configuration</h1>
<p>B&amp;R Unit Testing</p>
<p>The unit test tasks should not be deployed on a commissioned machine</p>
<p>Therefore\, you should have a dedicated configuration in the AS project for unit testing</p>
<p><img alt="" src="../img/Testing26.png" /></p>
<p><img alt="" src="../img/Testing27.png" /></p>
<h1 id="tips-for-writing-in-c">Tips for Writing in C</h1>
<table>
<thead>
<tr>
<th style="text-align: center;">Topic</th>
<th style="text-align: center;">ST</th>
<th style="text-align: center;">C</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">Assignment operator</td>
<td style="text-align: center;">:=</td>
<td style="text-align: center;">=</td>
</tr>
<tr>
<td style="text-align: center;">Address reference</td>
<td style="text-align: center;">ADR(var)</td>
<td style="text-align: center;">&amp;var</td>
</tr>
<tr>
<td style="text-align: center;">End of line</td>
<td style="text-align: center;">;</td>
<td style="text-align: center;">;</td>
</tr>
<tr>
<td style="text-align: center;">Comment</td>
<td style="text-align: center;">//</td>
<td style="text-align: center;">//</td>
</tr>
<tr>
<td style="text-align: center;">Equality</td>
<td style="text-align: center;">=</td>
<td style="text-align: center;">==</td>
</tr>
<tr>
<td style="text-align: center;">Inequality</td>
<td style="text-align: center;">&lt;&gt;</td>
<td style="text-align: center;">!=</td>
</tr>
<tr>
<td style="text-align: center;">“And” operator</td>
<td style="text-align: center;">AND</td>
<td style="text-align: center;">&amp;&amp;</td>
</tr>
<tr>
<td style="text-align: center;">“Or” operator</td>
<td style="text-align: center;">OR</td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td style="text-align: center;">“Not” operator</td>
<td style="text-align: center;">NOT</td>
<td style="text-align: center;">!</td>
</tr>
<tr>
<td style="text-align: center;">String boundary</td>
<td style="text-align: center;">‘</td>
<td style="text-align: center;">“</td>
</tr>
<tr>
<td style="text-align: center;">Dynamic variable</td>
<td style="text-align: center;">AH GUID: 7777cae3-cdc0-4bf8-a12e-287ec8f75000</td>
<td style="text-align: center;">Link</td>
</tr>
</tbody>
</table>
<p>B&amp;R Unit Testing</p>
<ul>
<li>B&amp;R Unit Tests must be written in the C programming language. The task under test can be written in any programming language (ST\, ladder\, etc)\, but the tests themselves have to be in C.</li>
<li>Here are a few tips / tricks to help you transition quickly from ST to C:</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align: center;">For loop</th>
<th style="text-align: center;"></th>
<th style="text-align: center;"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">ST</td>
<td style="text-align: center;">C</td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td style="text-align: center;">FOR Var1 := 1 TO 9 DO<br />  //code<br />END_FOR</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">for (Var1 = 1; Var1&lt;10, Var1++)<br />{<br />  //code<br />}</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align: center;">Case statement</th>
<th style="text-align: center;"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">ST</td>
<td style="text-align: center;">C</td>
</tr>
<tr>
<td style="text-align: center;">CASE (stateVar) OF<br />   STATE1: <br />        //code<br />   STATE2:<br />        //code<br />END_CASE</td>
<td style="text-align: center;">Switch (stateVar)<br />{<br />   case 1:<br />      //code<br />      break;<br />   case2:<br />      //code<br />      break;<br />}<br />break;</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align: center;">If statement</th>
<th style="text-align: center;"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">ST</td>
<td style="text-align: center;">C</td>
</tr>
<tr>
<td style="text-align: center;">IF (condition) THEN<br />   //code<br />ELSIF(condition) THEN<br />  //code<br />ELSE<br />  //code<br />END_IF</td>
<td style="text-align: center;">if(condition) {<br />   //code<br />} <br />else if(condition) {<br />  //code<br />} <br />else {<br />  //code<br />}</td>
</tr>
</tbody>
</table>
<hr />
<p>Additional tips: 
- Also note in C if (i = 0) is perfectly valid and assigns 0 to i and evaluates as false.  Some people recommend reversing the statement so that the compiler will catch mistypes (e.g. if (0 = i) would not compile if you really meant if (0 == i))
- And for loop exit condition is always &lt;= in ST but you can decide &lt; or &lt;= in C</p>
<h1 id="built-in-tests">Built-In Tests</h1>
<p>B&amp;R Unit Test Framework</p>
<ul>
<li>The following tests are built into the B&amp;R Unit Testing framework. Use cases are provided in the template files.</li>
<li><em>Setup &amp; Teardown</em></li>
<li>These tests are used to clean things up before / after the tests run</li>
<li>More specifically:</li>
</ul>
<p><img alt="" src="../img/Testing28.png" /></p>
<p><img alt="" src="../img/Testing29.png" /></p>
<p>Runs before each individual test</p>
<p>Runs after each individual test</p>
<p>Runs before the entire group of tests in the test suite</p>
<p>Runs after the entire group of tests in the test suite</p>
<p>_SETUP_TEST:</p>
<p>_TEARDOWN_TEST:</p>
<p>_SETUP_SET:</p>
<p>_TEARDOWN_SET:</p>
<p><img alt="" src="../img/Testing30.png" /></p>
<ul>
<li><em>Cyclic code</em></li>
<li>The _CYCLIC_SET test code is called once per program cycle\, as long as the test set is active (in progress)</li>
<li>Use cases:</li>
<li>Increment a timeout counter</li>
<li>Call mapp FUBs that are under test</li>
</ul>
<h1 id="test-structure">Test Structure</h1>
<p>B&amp;R Unit Testing</p>
<ul>
<li>Each test should have 3 fundamental sections:</li>
<li>Arrange</li>
<li>Sets up the test case</li>
<li>Any required settings\, parameters\, or other preparation needed for that specific test case should be performed here</li>
<li>Act</li>
<li>Calls the function to be tested</li>
<li>Act steps should cover the main thing to be tested</li>
<li>Assert</li>
<li>Assert expected outcome</li>
</ul>
<p><img alt="" src="../img/Testing31.png" /></p>
<p><img alt="" src="../img/Testing32.png" /></p>
<p><img alt="" src="../img/Testing33.png" /></p>
<p>B&amp;R Unit Testing</p>
<p>Each test should have 3 fundamental sections:</p>
<p>Arrange</p>
<p>Act</p>
<p>Assert</p>
<p>For simple tests\, this can be accomplished as shown.</p>
<p>_TEST testCase1(void)</p>
<p>{</p>
<p><span style="color:#2E952E">// Arrange</span></p>
<p>instMyCalc.CalcOperator <span style="color:#008080"> </span>  <span style="color:#000000">=</span>  <span style="color:#008080"> </span>  <span style="color:#000000">splMyCalcOPERATOR_ADD</span>  <span style="color:#000000">;</span>  <span style="color:#000000">    instMyCalc.Param1</span>  <span style="color:#008080">   </span>  <span style="color:#000000">=</span>  <span style="color:#008080"> </span>  <span style="color:#000000">1;</span>  <span style="color:#000000">    instMyCalc.Param2</span>  <span style="color:#008080">   </span>  <span style="color:#000000">=</span>  <span style="color:#008080"> </span>  <span style="color:#000000">2;</span></p>
<p><span style="color:#2E952E">// Act</span></p>
<p>MyCalculator(&amp;instMyCalc);</p>
<p><span style="color:#2E952E">// Assert</span></p>
<p>TEST_ASSERT_EQUAL_INT(3\, <span style="color:#008080"> </span>  <span style="color:#000000">instMyCalc.Result</span>  <span style="color:#000000">);</span>  <span style="color:#000000">    TEST_ASSERT_EQUAL_INT(ERR_OK\,</span>  <span style="color:#008080"> </span>  <span style="color:#000000">instMyCalc.Status</span>  <span style="color:#000000">);</span></p>
<p>}</p>
<p>B&amp;R Unit Testing</p>
<p><em>Advanced Example:</em></p>
<p>Each test should have 3 fundamental sections:</p>
<p>Arrange</p>
<p>Act</p>
<p>Assert</p>
<p>For more advanced tests or tests for asynchronous function blocks\, these sections should be implemented in a case statement.</p>
<p>This allows the FUBs to be called until they complete the asynchronous action (since they are called within _CYCLIC_SET)</p>
<p>_TEST <span style="color:#008080"> </span>  <span style="color:#000000">PowerOn</span>  <span style="color:#000000">(</span>  <span style="color:#0000FF">void</span>  <span style="color:#000000">)</span>  <span style="color:#000000">{</span>  <span style="color:#000000">    TIMEOUT_TEST_CASE</span>  <span style="color:#000000">    </span>  <span style="color:#0000FF">switch</span>  <span style="color:#008080"> </span>  <span style="color:#000000">(</span>  <span style="color:#000000">TestState</span>  <span style="color:#000000">)</span>  <span style="color:#000000">    {</span>  <span style="color:#000000">        </span>  <span style="color:#0000FF">case</span>  <span style="color:#008080"> </span>  <span style="color:#000000">TEST_ARRANGE:</span>  <span style="color:#000000">          </span>  <span style="color:#000000">TestState</span>  <span style="color:#008080"> </span>  <span style="color:#000000">=</span>  <span style="color:#008080"> </span>  <span style="color:#000000">TEST_ACT;</span>  <span style="color:#000000">        </span>  <span style="color:#0000FF">break</span>  <span style="color:#000000">;</span>  <span style="color:#000000">        </span>  <span style="color:#0000FF">case</span>  <span style="color:#008080"> </span>  <span style="color:#000000">TEST_ACT:</span>  <span style="color:#000000">            </span>  <span style="color:#0000FF">switch</span>  <span style="color:#008080"> </span>  <span style="color:#000000">(</span>  <span style="color:#000000">ActSubState</span>  <span style="color:#000000">)</span>  <span style="color:#000000">            {</span>  <span style="color:#000000">                </span>  <span style="color:#0000FF">case</span>  <span style="color:#008080"> </span>  <span style="color:#000000">0:</span>  <span style="color:#000000">                    </span>  <span style="color:#000000">AxisControl.Command.Power</span>  <span style="color:#008080"> </span>  <span style="color:#000000">=</span>  <span style="color:#008080"> </span>  <span style="color:#000000">true;</span>  <span style="color:#000000">                    </span>  <span style="color:#000000">ActSubState</span>  <span style="color:#008080"> </span>  <span style="color:#000000">=</span>  <span style="color:#008080"> </span>  <span style="color:#000000">1;</span>  <span style="color:#000000">                </span>  <span style="color:#0000FF">break</span>  <span style="color:#000000">;</span>  <span style="color:#000000">                </span>  <span style="color:#0000FF">case</span>  <span style="color:#008080"> </span>  <span style="color:#000000">1:</span>  <span style="color:#000000">                    TEST_BUSY_CONDITION(</span>  <span style="color:#000000">AxisControl.Status.Busy</span>  <span style="color:#008080"> </span>  <span style="color:#000000">==</span>  <span style="color:#008080"> </span>  <span style="color:#000000">true);</span>  <span style="color:#000000">                    </span>  <span style="color:#000000">TestState</span>  <span style="color:#008080"> </span>  <span style="color:#000000">=</span>  <span style="color:#008080"> </span>  <span style="color:#000000">TEST_ASSERT;</span>  <span style="color:#000000">                </span>  <span style="color:#0000FF">break</span>  <span style="color:#000000">;</span>  <span style="color:#000000">            }</span>  <span style="color:#000000">        </span>  <span style="color:#0000FF">break</span>  <span style="color:#000000">;</span>  <span style="color:#000000">        </span>  <span style="color:#0000FF">case</span>  <span style="color:#008080"> </span>  <span style="color:#000000">TEST_ASSERT:</span>  <span style="color:#000000">            TEST_ASSERT(</span>  <span style="color:#000000">AxisControl.Status.IsPowered</span>  <span style="color:#000000">);</span>  <span style="color:#000000">            TEST_DONE;</span>  <span style="color:#000000">        </span>  <span style="color:#0000FF">break</span>  <span style="color:#000000">;</span>  <span style="color:#000000">    }</span></p>
<p><span style="color:#000000">    TEST_BUSY;</span>  <span style="color:#000000">}</span></p>
<h1 id="return-statements">Return Statements</h1>
<p>B&amp;R Unit Testing</p>
<ul>
<li>Each test must always provide a return statement in every scan of the test</li>
<li>The possible return statements are Busy\, Abort\, or Done</li>
<li>Full list shown below</li>
<li>It is common practice to put TEST_BUSY outside of your case statement so that the default return statement is that the test is busy</li>
<li>See screenshot below</li>
<li>When one of these return statements is executed\, the test immediately ends. No subsequent code will run</li>
</ul>
<p><img alt="" src="../img/Testing34.png" /></p>
<ul>
<li>In the screenshot to the right\, we don’t technically need the “break;” after TEST_DONE\, but it is included for clarity nonetheless</li>
<li>This also means that you should have your FUB calls at the top of the test\, rather than at the end</li>
</ul>
<p><img alt="" src="../img/Testing35.png" /></p>
<p>GUID: 713c4282-3dea-4b74-ace1-41d8099255a7</p>
<h1 id="busy-and-abort-return-statements">Busy and Abort Return Statements</h1>
<p>Use Case</p>
<p>If you are testing asynchronous function blocks\, utilize the Busy and Abort conditions to allow for the FUB to finish processing</p>
<p>Use TEST_BUSY_CONDITION(fub.Busy == false) or TEST_BUSY_CONDITION(fub.Status == 65535) to wait for the FUB to finish being busy</p>
<p>Use TEST_ABORT_CONDITION(fub.Status != 0) to abort the test in the event of an error</p>
<p>Examples:</p>
<p><span style="color:#000000">DirInfo</span>  <span style="color:#000000">(&amp;</span>  <span style="color:#000000">DirInfo_UT</span>  <span style="color:#000000">);</span></p>
<p><span style="color:#000000">TEST_BUSY_CONDITION(</span>  <span style="color:#000000">DirInfo_UT.status</span>  <span style="color:#008080"> </span>  <span style="color:#000000">==</span>  <span style="color:#008080"> </span>  <span style="color:#000000">65535);</span>  <span style="color:#000000">TEST_ABORT_CONDITION(</span>  <span style="color:#000000">DirInfo_UT.status</span>  <span style="color:#008080"> </span>  <span style="color:#000000">!=</span>  <span style="color:#008080"> </span>  <span style="color:#000000">0);</span></p>
<h1 id="test-asserts">Test Asserts</h1>
<p>B&amp;R Unit Testing</p>
<p>An assert statement is used to declare the expected/passing result of the test</p>
<p>The most basic assert is TEST_ASSERT(condition)\, where the asserted condition is a Boolean value</p>
<p>A full list of available asserts is located at the following GUID (after installing B&amp;R unit testing): 50125d50-e096-4775-859c-2051cb498f67</p>
<p><img alt="" src="../img/Testing36.png" /></p>
<h1 id="timeout-counter">Timeout Counter</h1>
<p>Avoid Getting Stuck in a Test</p>
<ul>
<li>It recommended to implement a timeout counter to fail a test if it gets stuck for too long</li>
<li>The test will be failed if the counter exceeds a certain value</li>
<li>To implement the timeout counter:</li>
<li>Copy the code for the TIMEOUT_TEST_CASE macro (within the template test file) to the top of your test suite file (right beneath the #include section). This macro will force the test to fail if the cycleCount is exceeded. The rest of the tests in the test suite will subsequently run as usual.</li>
<li>Adjust the cycleCount to a value that makes sense for your testing</li>
<li>Declare the following variables test task variable file:<ul>
<li>“ActSubState” of type USINT</li>
<li>“cycleCount” of type USINT</li>
</ul>
</li>
<li>Within _CYCLIC_SET\, increment cycleCount (cycleCount++)</li>
<li>Call TIMEOUT_TEST_CASE at the top of each test</li>
<li>Now\, each test will be protected from getting stuck / never ending</li>
</ul>
<p><img alt="" src="../img/Testing37.png" /></p>
<h1 id="strategy-for-uiconnect-commands-in-tests">Strategy for UIConnect Commands in Tests</h1>
<p>Special Case</p>
<p>If you need to use commands from a UIConnect structure in a test\, you must follow this order of operations within a case statement:</p>
<p>Trigger the command</p>
<p>Wait for the status that the command is in progress (whatever that may be)</p>
<p>Wait for it to return to idle</p>
<p>Then SOMETIMES wait for it to refresh (it’ll automatically do this depending on what command you run)</p>
<p>Wait for it to return to idle AGAIN</p>
<p><em>Then</em>  you can move on in your testing process</p>
<p>Not following this order of operations causes intermittent failures</p>
<p>Example: Note that the UIConnect case statement is embedded within the TEST_ACT case of the overall case statement</p>
<p><img alt="" src="../img/Testing38.png" /></p>
<h1 id="variable-mapping-file">Variable Mapping File</h1>
<p>B&amp;R Unit Testing</p>
<ul>
<li>In most (if not all) tests\, you will need to use a value of a local variable within the task under test within the unit test. To get that variable data into the unit test task\, use a Variable Mapping File (.vvm). Steps:</li>
<li>Add the local variable and type file of the task under test as a reference to the unit test task</li>
<li>This way\, the unit test task has its own instance of every variable within the task under test</li>
<li>Add a Variable Mapping File (.vvm) to the unit test configuration</li>
<li>Within the .vvm\, map the local variables from the task under test to the equivalent local variable instances within the unit test task.</li>
<li>Variable mapping goes in both directions: inputs from the task under test to the unit test task\, and outputs from the unit test task to the task under test</li>
</ul>
<p><img alt="" src="../img/Testing39.png" /></p>
<p>B&amp;R Unit Testing</p>
<ul>
<li>Note that you cannot directly map function block outputs from the task under test to the unit test task function block outputs</li>
<li>As a result\, you need to make a “middle man” structure to capture the value of the FUB outputs and bring them in to the unit test task</li>
<li>In the screenshot below\, this corresponds to the MpBlockStatus structure in the unit test task</li>
</ul>
<p><img alt="" src="../img/Testing40.png" /></p>
<h1 id="debugging">Debugging</h1>
<p>B&amp;R Unit Testing</p>
<p>Breakpoints can be set directly in the unit test code</p>
<p>Therefore\, when a unit test fails\, use the debugger to troubleshoot the problem</p>
<p><img alt="" src="../img/Testing41.png" /></p>
<h1 id="integration-testing">Integration Testing</h1>
<p>At B&amp;R</p>
<p>pytest and Selenium are the foundation of the mapp View integration testing framework</p>
<p>pytest: Python testing suite</p>
<p>Selenium: driver interface for web browsers. Allows you to interact with the Chrome browser.</p>
<p><img alt="" src="../img/Testing42.png" /></p>
<p><img alt="" src="../img/Testing43.png" /></p>
<p>pytest</p>
<p>The pytest framework makes it easy to write small\, readable tests\, and can scale to support complex functional testing for applications and libraries.</p>
<p>Install pytest with:</p>
<p>pip install pytest</p>
<p>Run pytest with:</p>
<p>pytest</p>
<p>pytest finds all files within your current directory that are named test_*.py or *_test.py (where * can be anything) and runs those tests</p>
<h1 id="automated-integration-testing-workflow">Automated Integration Testing Workflow</h1>
<p>Summary</p>
<ul>
<li>Place all of your test files (test_*.py or *_test.py) within one directory of your project repository</li>
<li>Call pytest in your Jenkinsfile using the helper function RunMappViewIntegrationTests()</li>
<li>This helper function allows you to point to another directory that holds your tests\, rather than requiring it to be the same directory as your Jenkinsfile</li>
<li>For more details on the Jenkinsfile\, refer to the Build Server section of the DevOps Package</li>
</ul>
<h1 id="integration-testing_1">Integration Testing</h1>
<p>pytest assert</p>
<p>Unlike B&amp;R unit tests\, there is only 1 assert statement in pytest:</p>
<p><strong>assert \<Boolean expression>\, “optional failure message”</strong></p>
<p><em>Example:</em></p>
<p>def f():</p>
<p>return 3</p>
<p>def test_function():</p>
<p>assert f() == 4\, “Value was not 4”</p>
<p>def test_function_2():</p>
<p>my_list = [“apple”\, “banana”]</p>
<p>assert “apple” in my_list</p>
<h1 id="pytest-fixtures">Pytest fixtures</h1>
<p>Integration Testing</p>
<ul>
<li>_Example: _</li>
<li>import pytest</li>
<li>class Fruit:</li>
<li>def __init__(self\, name):</li>
<li>self.name = name</li>
<li>def __eq__(self\, other):</li>
<li>return self.name == other.name</li>
<li>@pytest.fixture</li>
<li>def my_fruit():</li>
<li>return Fruit("apple")</li>
<li>@pytest.fixture</li>
<li>def fruit_basket(my_fruit):</li>
<li>return [Fruit("banana")\, my_fruit]</li>
<li>def test_my_fruit_in_basket(my_fruit\, fruit_basket):</li>
<li>
<p>assert my_fruit in fruit_basket</p>
</li>
<li>
<p>A fixture provides a defined\, reliable\, and consistent context for the tests. This could include an environment (e.g.\, a database configured with known parameters) or content (such as a dataset).</p>
</li>
<li>Fixtures are essentially subroutines that each test case requests\, by adding it as a parameter to the test case</li>
<li>Fixtures define the steps and data that constitute the  <em>setup\, teardown\, and arrange</em>  phase of a test. In pytest\, they are functions you define that serve this purpose.</li>
<li>Fixtures are defined with the @pytest.fixture decorator on a function</li>
</ul>
<h1 id="integration-testing_2">Integration Testing</h1>
<p>pytest fixtures</p>
<p>Fixtures can have scopes: function\, module\, class\, package\, session</p>
<p>“Yield” inside a fixture stops the function at that point but will resume at that point after the test  function runs (Useful for creating a setup and teardown within a single fixture)</p>
<p>_Example: _</p>
<p><span style="color:#DCDCAA">@</span>  <span style="color:#4EC9B0">pytest</span>  <span style="color:#DCDCAA">.fixture</span>  <span style="color:#D4D4D4">(</span>  <span style="color:#9CDCFE">scope</span>  <span style="color:#D4D4D4">=</span>  <span style="color:#CE9178">"class"</span>  <span style="color:#D4D4D4">)</span></p>
<p><span style="color:#569CD6">def</span>  <span style="color:#D4D4D4"> </span>  <span style="color:#DCDCAA">opcua_setup</span>  <span style="color:#D4D4D4">():</span></p>
<p><span style="color:#D4D4D4">    </span>  <span style="color:#6A9955">#Setup</span></p>
<p><span style="color:#D4D4D4">    </span>  <span style="color:#9CDCFE">opcua_client</span>  <span style="color:#D4D4D4"> = </span>  <span style="color:#4EC9B0">Client</span>  <span style="color:#D4D4D4">(</span>  <span style="color:#CE9178">"</span>  <span style="color:#CE9178">opc.tcp</span>  <span style="color:#CE9178">://localhost:4840/"</span>  <span style="color:#D4D4D4">)</span></p>
<p><span style="color:#D4D4D4">    </span>  <span style="color:#9CDCFE">opcua_client</span>  <span style="color:#D4D4D4">.</span>  <span style="color:#DCDCAA">connect</span>  <span style="color:#D4D4D4">()</span></p>
<p><span style="color:#D4D4D4">    </span>  <span style="color:#C586C0">yield</span>  <span style="color:#D4D4D4"> </span>  <span style="color:#9CDCFE">opcua_client</span></p>
<p><span style="color:#D4D4D4">    </span>  <span style="color:#6A9955">#Teardown</span></p>
<p><span style="color:#D4D4D4">    </span>  <span style="color:#9CDCFE">opcua_client</span>  <span style="color:#D4D4D4">.</span>  <span style="color:#DCDCAA">disconnect</span>  <span style="color:#D4D4D4">()</span></p>
<p>pytest parameterized test</p>
<p>pytest enables you to run the same test multiple times with different inputs (i.e.\, test parameterization)</p>
<p>Do this by using the @pytest.mark.parameterize function decorator</p>
<p><em>Example:</em></p>
<p>@pytest.mark.parametrize("test_input\,expected"\, [("3+5"\, 8)\, ("2+4"\, 6)\, ("6*9"\, 42)])</p>
<p>def test_eval(test_input\, expected):</p>
<p>assert eval(test_input) == expected</p>
<p>Selenium</p>
<p>Selenium allows you to automate web browsers\, primarily for testing purposes</p>
<p>Install selenium with:</p>
<p>pip install selenium</p>
<p>Selenium</p>
<ul>
<li>Basic components</li>
<li>Session</li>
<li>driver = webdriver.Chrome()</li>
<li>Take action on browser</li>
<li>driver.get(“http://localhost:81/index.html?visuId=mappFramework”)</li>
<li>Request browser information</li>
<li>title = driver.title</li>
<li>Find an element(s)</li>
<li>text_box = driver.find_element(by=By.NAME\, value="my-text")</li>
<li>submit_button = driver.find_element(by=By.CSS_SELECTOR\, value="button")</li>
<li>Take action on an element</li>
<li>text_box.send_keys("Selenium")</li>
<li>submit_button.click()</li>
<li>Request element information</li>
<li>value = message.text</li>
<li>End the session (close the browser)</li>
<li>driver.quit()</li>
</ul>
<p>Selenium</p>
<p>Find elements using Developer tools in Chrome by pressing F12\, or via the “…” menu:</p>
<p><img alt="" src="../img/Testing44.png" /></p>
<p>Selenium</p>
<p><img alt="" src="../img/Testing45.png" /></p>
<p><img alt="" src="../img/Testing46.png" /></p>
<p>IntegrationTestBase.py</p>
<p>Helper functions:</p>
<p>get_element – returns an element</p>
<p>wait_for_element – waits for an element to be available</p>
<p>wait_and_click_element – waits for an element to be available and click the element</p>
<p>wait_for_init_page – waits for the initial page to load</p>
<p>load_content – clicks a button that loads a content and waits for the content to be loaded</p>
<p>set_input – sets an input to a value</p>
<p>get_value – gets the value of an output</p>
<p>get_table_column – returns a column from a table</p>
<p>get_table_row – returns the row of a table\, row is identified by a value in a specified column</p>
<p>select_table_row – clicks a row of a table\, row is identified by a value in a specified column</p>
<p>select_downdown_item – select an item in a dropdown input</p>
<p>get_open_dialog_id – returns the id of the currently opened dialog</p>
<p>read_variable – reads a variable via OpcUa</p>
<p>write_variable – writes a variable via OpcUa</p>
<p>IntegrationTestBase.py</p>
<ul>
<li>Included fixtures within the DevOps package:</li>
<li>visu_setup()</li>
<li>Selenium Chrome Webdriver</li>
<li>Will be used in every test</li>
<li>opcua_setup()</li>
<li>OpcUa client</li>
<li>Also need to install asyncua and opcua packages (pip install asyncua opcua)</li>
<li>Will be needed in most tests</li>
<li>login()</li>
<li>logs in as a specific user</li>
</ul>
<p>Example</p>
<h1 id="manual-testing">Manual Testing</h1>
<p>At B&amp;R</p>
<p><img alt="" src="../img/Testing47.png" /></p>
<h1 id="template-excel-file">Template Excel File</h1>
<p>Manual Testing</p>
<p>For the situations where it is not possible to write an automated test\, manual testing must be done</p>
<p>To help keep track of the status of the manual tests\, there is a template Excel file provided in this package</p>
<p>Details for how to use the file are included on the Overview tab</p>
<p><img alt="" src="../img/Testing48.png" /></p>
<p><img alt="" src="../img/Testing49.png" /></p>
<h1 id="manual-testing_1">Manual Testing</h1>
<p>Multiple Asserts</p>
<ul>
<li>When defining your manual tests\, it can be advantageous to combine more than one expected result (assert) into one test</li>
<li>Manual testing is more “expensive” since it takes more time. So\, designing your tests in such a way that a couple of things that are naturally related can be checked over the course of a test can make sense (as opposed to one dedicated assert per test)</li>
<li>However\, this must be balanced with being able to get useful information out of a failed test.</li>
<li>If your test is written in such a way that 10 things are checked all within one test\, then if that test fails you will spend additional time trying to figure out exactly where/how it failed</li>
<li>Keep this in mind as you design your tests</li>
</ul>
<p><img alt="" src="../img/Testing50.png" /></p>
<p>Good Examples</p>
<p>Multiple asserts that are related to minimize testing effort</p>
<p><img alt="" src="../img/Testing51.png" /></p>
<p>Bad Examples</p>
<p>Tedious test that should be automated (error prone when executed manually)</p>
<p><img alt="" src="../img/Testing52.png" /></p>
<p>We reserve the right to change the content of this presentation without prior notice. The information contained herein is believed to be accurate as of the date of publication\, however\, B&amp;R makes no warranty\, expressed or implied\, with regards to the products or the documentation contained within this document. B&amp;R shall not be liable in the event if incidental or consequential damages in connection with or arising from the furnishing\, performance or use of these products. The software names\, hardware names and trademarks used in this document are registered by the respective companies.</p>
<p>Copyright © B&amp;R – Subject to change without notice</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant"], "search": "../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.d7c377c4.min.js"></script>
      
    
  </body>
</html>