
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../AutomationBuildServer_5_CreateJenkinsProject/">
      
      
        <link rel="next" href="../AutomationBuildServer_7_IntegrationWithBitbucket/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.2">
    
    
      
        <title>Customizing the Jenkinsfile - DevOps Package</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.50c56a3b.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#customizing-the-jenkinsfile" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="DevOps Package" class="md-header__button md-logo" aria-label="DevOps Package" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            DevOps Package
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Customizing the Jenkinsfile
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="DevOps Package" class="md-nav__button md-logo" aria-label="DevOps Package" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    DevOps Package
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Project Management
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Project Management
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ProjectManagement/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ProjectManagement_0_ProjectPlanning/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Project Planning
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ProjectManagement_1_Jira/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Jira
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ProjectManagement_2_Confluence/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Confluence
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ProjectManagement_3_Bitbucket/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GitHub & Bitbucket
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ProjectManagement_4_OpenSourceLicensing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Open-Source Licensing
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Version Control
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Version Control
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../VersionControl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../VersionControl_01_BuildVersionFramework/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Build Version Framework
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../VersionControl_0_SummaryOfTemplateFiles/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Template Files
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../VersionControl_1_Git/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Git
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../VersionControl_2_Sourcetree/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sourcetree
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../VersionControl_3_Commits/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Commits
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../VersionControl_4_Branching/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Branching
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../VersionControl_5_ResolvingMergeConflicts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Resolving Merge Conflicts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../VersionControl_6_CodeReview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Code Review
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../VersionControl_7_Versioning/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Versioning
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../VersionControl_8_Submodules/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Submodules
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../VersionControl_9_Hooks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hooks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../VersionControl_10_ASProjectSettings/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AS Project Settings
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../VersionControl_11_MigratingFromSVN/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Migrating from SVN
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Testing
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Testing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Testing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Testing_0_TemplateFiles/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Template Files
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Testing_1_TestPlan/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Test Plan
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Testing_2_TDD/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Test Driven Development
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Testing_3_BnRUnitTesting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    B&R Unit Testing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Testing_4_IntegrationTesting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Integration Testing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Testing_5_ManualTesting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Manual Testing
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Automation and Build Server
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Automation and Build Server
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../AutomationBuildServer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../AutomationBuildServer_0_TemplateFiles/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Template Files
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../AutomationBuildServer_1_HowToUseJenkins/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to use Jenkins
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../AutomationBuildServer_2_BnRJenkinsHelperLib/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    B&R-Jenkins Helper Library
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../AutomationBuildServer_3_GettingStarted/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../AutomationBuildServer_4_CreateDocker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Create Jenkins Agent Docker Container
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../AutomationBuildServer_5_CreateJenkinsProject/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Create Jenkins Project
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Customizing the Jenkinsfile
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Customizing the Jenkinsfile
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview-of-the-jenkinsfile-template" class="md-nav__link">
    <span class="md-ellipsis">
      Overview of the Jenkinsfile Template
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#difference-between-variables-and-environment-variables" class="md-nav__link">
    <span class="md-ellipsis">
      Difference between Variables and Environment Variables
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#customization" class="md-nav__link">
    <span class="md-ellipsis">
      Customization
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Customization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#variables" class="md-nav__link">
    <span class="md-ellipsis">
      Variables
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agent" class="md-nav__link">
    <span class="md-ellipsis">
      Agent
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environment" class="md-nav__link">
    <span class="md-ellipsis">
      Environment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#options" class="md-nav__link">
    <span class="md-ellipsis">
      Options
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#obtaining-the-webhook-url" class="md-nav__link">
    <span class="md-ellipsis">
      Obtaining the Webhook URL
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stages" class="md-nav__link">
    <span class="md-ellipsis">
      Stages
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Stages">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stage-update-tags" class="md-nav__link">
    <span class="md-ellipsis">
      Stage: Update Tags
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stage-build-as-project" class="md-nav__link">
    <span class="md-ellipsis">
      Stage: Build AS Project
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stage-unit-tests" class="md-nav__link">
    <span class="md-ellipsis">
      Stage: Unit Tests
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stage-deploy" class="md-nav__link">
    <span class="md-ellipsis">
      Stage: Deploy
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post" class="md-nav__link">
    <span class="md-ellipsis">
      Post
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Post">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#post-always" class="md-nav__link">
    <span class="md-ellipsis">
      Post: Always
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Post: Always">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-of-a-successful-build-email-notification" class="md-nav__link">
    <span class="md-ellipsis">
      Example of a Successful Build Email Notification
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-of-an-unstable-build-email-notification" class="md-nav__link">
    <span class="md-ellipsis">
      Example of an Unstable Build Email Notification
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-success-unstable" class="md-nav__link">
    <span class="md-ellipsis">
      Post: Success, Unstable
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Post: Success, Unstable">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-of-ms-teams-messages" class="md-nav__link">
    <span class="md-ellipsis">
      Example of MS Teams Messages
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-success-unstable_1" class="md-nav__link">
    <span class="md-ellipsis">
      Post: Success, Unstable
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../AutomationBuildServer_7_IntegrationWithBitbucket/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Integration with Bitbucket
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../AutomationBuildServer_8_AutomatedDeployment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Automated Deployment
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview-of-the-jenkinsfile-template" class="md-nav__link">
    <span class="md-ellipsis">
      Overview of the Jenkinsfile Template
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#difference-between-variables-and-environment-variables" class="md-nav__link">
    <span class="md-ellipsis">
      Difference between Variables and Environment Variables
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#customization" class="md-nav__link">
    <span class="md-ellipsis">
      Customization
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Customization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#variables" class="md-nav__link">
    <span class="md-ellipsis">
      Variables
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agent" class="md-nav__link">
    <span class="md-ellipsis">
      Agent
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environment" class="md-nav__link">
    <span class="md-ellipsis">
      Environment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#options" class="md-nav__link">
    <span class="md-ellipsis">
      Options
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#obtaining-the-webhook-url" class="md-nav__link">
    <span class="md-ellipsis">
      Obtaining the Webhook URL
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stages" class="md-nav__link">
    <span class="md-ellipsis">
      Stages
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Stages">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stage-update-tags" class="md-nav__link">
    <span class="md-ellipsis">
      Stage: Update Tags
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stage-build-as-project" class="md-nav__link">
    <span class="md-ellipsis">
      Stage: Build AS Project
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stage-unit-tests" class="md-nav__link">
    <span class="md-ellipsis">
      Stage: Unit Tests
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stage-deploy" class="md-nav__link">
    <span class="md-ellipsis">
      Stage: Deploy
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post" class="md-nav__link">
    <span class="md-ellipsis">
      Post
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Post">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#post-always" class="md-nav__link">
    <span class="md-ellipsis">
      Post: Always
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Post: Always">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-of-a-successful-build-email-notification" class="md-nav__link">
    <span class="md-ellipsis">
      Example of a Successful Build Email Notification
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-of-an-unstable-build-email-notification" class="md-nav__link">
    <span class="md-ellipsis">
      Example of an Unstable Build Email Notification
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-success-unstable" class="md-nav__link">
    <span class="md-ellipsis">
      Post: Success, Unstable
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Post: Success, Unstable">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-of-ms-teams-messages" class="md-nav__link">
    <span class="md-ellipsis">
      Example of MS Teams Messages
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-success-unstable_1" class="md-nav__link">
    <span class="md-ellipsis">
      Post: Success, Unstable
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="customizing-the-jenkinsfile">Customizing the Jenkinsfile</h1>
<h2 id="overview-of-the-jenkinsfile-template">Overview of the Jenkinsfile Template</h2>
<p>The provided Jenkinsfile template accomplishes the following tasks:</p>
<ol>
<li>Builds the AS project</li>
<li>Runs the unit tests</li>
<li>Creates an ARsim structure and PIP</li>
<li>Uploads the ARsim structure and PIP to GitHub, and sends them to an MS Teams channel via a chat message</li>
<li>Sends an email with the results of the build</li>
</ol>
<p>This template is a starting point for your pipeline definition. There are a few things in this file that must be adjusted for it to run properly for your system.</p>
<p>The following information identifies the purpose of each section in the Jenkinsfile and any changes you must make. </p>
<p>There are 6 main sections in the Jenkinsfile pipeline:</p>
<ul>
<li><em>Variable Definitions</em>  – Defines global variables</li>
<li><em>Agent</em>  – Defines where the pipeline will run within the Jenkins environment</li>
<li><em>Environment</em>  – Defines global environment variables</li>
<li><em>Options</em>  – Configures options</li>
<li><em>Stages</em>  – Defines the steps in the pipeline. If a stage fails, subsequent stages don’t run</li>
<li><em>Post</em>  – Always runs at the end of the pipeline, even if a stage fails</li>
</ul>
<h2 id="difference-between-variables-and-environment-variables">Difference between Variables and Environment Variables</h2>
<p>Variables:</p>
<ul>
<li>Defined outside the pipeline, at the top of the file</li>
<li>All variables are global</li>
</ul>
<p>Environment Variables:</p>
<ul>
<li>Defined within an environment{} section, either at the top level of the pipeline (for pipeline global environment variable declarations) or within a stage of the pipeline (for stage local declarations)</li>
<li>Global environment variables can also be defined in the configuration of Jenkins. In this case, the variables are accessible to all pipelines</li>
<li>There are also some built-in environment variables that can be used throughout any Jenkinsfile (analogous to System Variables in mapp View). A full list of predefined and readily available environment variables in Jenkins is available <a href="https://www.jenkins.io/doc/book/pipeline/jenkinsfile/#using-environment-variables">here</a>.</li>
<li>The built-in workspace environment variable (${WORKSPACE}) is not available until the pipeline starts running. Therefore, if the variable you are creating needs to reference the workspace, you must declare it as an environment variable. In our template file, this is why PROJECT_DIR and RELEASE_VERSION are declared as environment variables.</li>
</ul>
<h2 id="customization">Customization</h2>
<h3 id="variables">Variables</h3>
<p>Starting at the top of the Jenkinsfile, we will begin by adjusting the global variables. The following table describes each variable. Adjust the values accordingly:</p>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>TEAMS_CHANNEL_URL</td>
<td>Teams channel webhook URL where messages about the pipeline status will automatically be sent. For more details on how to define this, refer to the “Options” section.</td>
</tr>
<tr>
<td>CONFIG_NAME</td>
<td>Name of the configuration in the AS project that you are running through the pipeline</td>
</tr>
<tr>
<td>UNIT_TEST_CONFIG_NAME</td>
<td>Name of the unit test configuration in the AS project</td>
</tr>
<tr>
<td>REPO_NAME</td>
<td>Name of the GitHub repository. Only required if you plan to upload files to GitHub.</td>
</tr>
<tr>
<td>REPO_ORGANIZATION</td>
<td>Name of the GitHub organization. Only required if you plan to upload files to GitHub.</td>
</tr>
<tr>
<td>EMAIL_LIST</td>
<td>List of email addresses that you want to send the results to, each separated by a semicolon</td>
</tr>
</tbody>
</table>
<h3 id="agent">Agent</h3>
<p>Edit the “agent” line:</p>
<ul>
<li>If you are utilizing the B&amp;R Jenkins server to start, then identify the docker container your pipeline will run in. This simply depends on the AS version of your project<ul>
<li>Example: AS_412</li>
</ul>
</li>
<li>If you have built your own Jenkins server, then specify the <a href="https://www.jenkins.io/doc/book/using/using-agents/">agent</a> accordingly.</li>
</ul>
<p><img alt="" src="../img/Automation%20and%20Build%20Server22.png" /></p>
<h3 id="environment">Environment</h3>
<p>The following table describes each environment variable. Adjust the values accordingly:</p>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>PROJECT_DIR</td>
<td>Specify the path within the repository to the AS project (the folder containing the .apj file). <br />Use \\ for folder separation.<br />Example: PROJECT_DIR = "$WORKSPACE\\TestProject“<br />If the project is stored in the root directory, then leave it defined as PROJECT_DIR = "$WORKSPACE"</td>
</tr>
<tr>
<td>RELEASE_VERSION</td>
<td>Holds the version number of the code in the repo. No changes required.</td>
</tr>
</tbody>
</table>
<h3 id="options">Options</h3>
<p>The “options” section sets up a webhook to an MS Teams channel so that you can automatically send information to that channel. This includes:
* Updates on when the pipeline has started / stopped
* Whether the pipeline succeeded
* The output files of the pipeline (by default in our template, the output files are the zipped up ARsim structure and PIP)</p>
<p>To establish this connection, you need to obtain your Teams channel webhook URL (see next section) and paste it in the value for the TEAMS_CHANNEL_URL variable</p>
<p><img alt="" src="../img/Automation%20and%20Build%20Server23.png" /></p>
<h4 id="obtaining-the-webhook-url">Obtaining the Webhook URL</h4>
<p>To obtain the webhook URL for a Microsoft Teams Connection, follow these steps: </p>
<ul>
<li>
<p>Navigate to the channel in the Team that you want to establish the connection to</p>
</li>
<li>
<p>Click the “…” button, then click "Connectors"</p>
</li>
</ul>
<p><img alt="" src="../img/Automation%20and%20Build%20Server24.png" /></p>
<ul>
<li>Click “Configure” for “Incoming Webhook”</li>
</ul>
<p><img alt="" src="../img/Automation%20and%20Build%20Server25.png" /></p>
<ul>
<li>Give your webhook a name and click “Create”</li>
</ul>
<p><img alt="" src="../img/Automation%20and%20Build%20Server26.png" /></p>
<ul>
<li>Afterwards, the URL you need will be populated in the field at the bottom. Copy this link and paste it at the top of the Jenkinsfile as the value of the TEAMS_CHANNEL_URL variable</li>
</ul>
<p><img alt="" src="../img/Automation%20and%20Build%20Server27.png" /></p>
<h3 id="stages">Stages</h3>
<p>The next section in the pipeline is the stages. This is where you define the actions that the build server will perform. This is the “meat and potatoes” of the pipeline.</p>
<p>There are 4 stages set up in the template Jenkinsfile, which we will now go through one by one:</p>
<ol>
<li>Update Tags</li>
<li>Build AS Project</li>
<li>Unit Tests</li>
<li>Deploy</li>
</ol>
<h4 id="stage-update-tags">Stage: Update Tags</h4>
<ul>
<li>This stage force-pulls the tags in the repository</li>
<li>Note that therefore, at least one tag must exist in the repo</li>
<li>This information will be used later to create a version number</li>
<li>No changes necessary</li>
</ul>
<p><img alt="" src="../img/Automation%20and%20Build%20Server28.png" /></p>
<h4 id="stage-build-as-project">Stage: Build AS Project</h4>
<ul>
<li>This stage builds the AS project</li>
<li>A value of -1 for “max_warnings” means you can have infinite warnings. If you optionally specify a positive value here, the stage will fail if the number of build warnings exceeds this value.</li>
</ul>
<p><img alt="" src="../img/Automation%20and%20Build%20Server29.png" /></p>
<h4 id="stage-unit-tests">Stage: Unit Tests</h4>
<ul>
<li>
<p>This stage runs the automated unit tests</p>
</li>
<li>
<p>If the pipeline gets stuck on a unit test for longer than 15 minutes, the tests will fail. Optionally adjust this timeout value as desired.</p>
</li>
</ul>
<p><img alt="" src="../img/Automation%20and%20Build%20Server30.png" /></p>
<h4 id="stage-deploy">Stage: Deploy</h4>
<ul>
<li>
<p>The template separates the deploy stage between release branches and feature/develop branches</p>
</li>
<li>
<p>Therefore, you can trigger different actions depending on what branch you pushed to</p>
</li>
<li>
<p>By default, both stages create the ARsim structure and Project Installation Package</p>
</li>
<li>
<p>If you want to perform another action in either stage, add it accordingly</p>
</li>
</ul>
<p><img alt="" src="../img/Automation%20and%20Build%20Server31.png" /></p>
<h3 id="post">Post</h3>
<p>The code within Post will always run, even if a stage in the pipeline fails.</p>
<p>Within Post, there are 3 subsections:</p>
<ol>
<li><strong>Always</strong>  – runs in every single post processing</li>
<li><strong>Success</strong>  – runs if all unit tests pass</li>
<li><strong>Unstable</strong>  – runs if any of the unit tests fail. This is classified as “unstable” rather than a failure because the pipeline itself completed, but the tests did not pass.</li>
</ol>
<h4 id="post-always">Post: Always</h4>
<p>The “Always” post script converts the B&amp;R Unit test results into a data format that Jenkins can understand what passed/failed.</p>
<p>It archives the ARsim structure and PIP so that they can be used in subsequent pipelines or uploaded to GitHub/Teams.</p>
<p>It als osends an email with the build status to the EMAIL_LIST recipients.</p>
<p>The PIP that gets automatically generated uses the following installation settings:</p>
<ul>
<li>Consistent installation</li>
<li>Allow updates without data loss</li>
<li>Keep PV values</li>
<li>Ignore version</li>
<li>Always install</li>
</ul>
<h5 id="example-of-a-successful-build-email-notification">Example of a Successful Build Email Notification</h5>
<p>All Tests Passed</p>
<p><img alt="" src="../img/Automation%20and%20Build%20Server32.png" />
<img alt="" src="../img/Automation%20and%20Build%20Server33.png" /></p>
<h5 id="example-of-an-unstable-build-email-notification">Example of an Unstable Build Email Notification</h5>
<p>Some Tests Failed</p>
<p><img alt="" src="../img/Automation%20and%20Build%20Server34.png" />
<img alt="" src="../img/Automation%20and%20Build%20Server35.png" /></p>
<h4 id="post-success-unstable">Post: Success, Unstable</h4>
<p>Both the “Success” and “Unstable” post scripts do the following:</p>
<ul>
<li>Upload the artifacts to GitHub</li>
<li>Send a message to the Teams channel with the status and artifact download links</li>
</ul>
<p>The only differences between these post scripts are:</p>
<ul>
<li>The color scheme (green for success, yellow for unstable)</li>
<li>The text that gets used for the Teams message (“Build Success” vs “Build Unstable”).</li>
</ul>
<h5 id="example-of-ms-teams-messages">Example of MS Teams Messages</h5>
<p>Success: </p>
<p><img alt="" src="../img/Automation%20and%20Build%20Server36.png" /></p>
<p>Unstable:</p>
<p><img alt="" src="../img/Automation%20and%20Build%20Server37.png" /></p>
<h4 id="post-success-unstable_1">Post: Success, Unstable</h4>
<p>Required steps:</p>
<ul>
<li>Comment/uncomment the upload lines depending on whether you want to upload the artifacts to GitHub</li>
<li>If you do choose to upload, make sure you have edited the REPO_NAME and REPO_ORGANIZATION variables at the top of the Jenkinsfile accordingly</li>
</ul>
<p><img alt="" src="../img/Automation%20and%20Build%20Server38.png" /></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant"], "search": "../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.d7c377c4.min.js"></script>
      
    
  </body>
</html>